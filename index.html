<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Highlands Coffee - Premium Coffee Experience</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Dancing+Script:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Background particles effect -->
    <div class="particles-container">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <div class="container">
        <!-- Header with Highlands Coffee branding -->
        <div class="header">
            <div class="header-content">
                <i class="fas fa-coffee header-icon"></i>
                <h1>Highlands Coffee</h1>
                <p>Premium Coffee Experience Since 1999</p>
                <div class="header-decorations">
                    <i class="fas fa-leaf"></i>
                    <i class="fas fa-heart"></i>
                    <i class="fas fa-leaf"></i>
                </div>
            </div>
        </div>

        <!-- Authentication Section -->
        <div id="authSection" class="auth-section">
            <div class="auth-container">
                <div class="auth-header">
                    <h2><i class="fas fa-user-circle"></i> Welcome Back</h2>
                    <p>Sign in to enjoy your personalized coffee experience</p>
                </div>

                <div class="tab-buttons">
                    <button class="tab-button active" onclick="switchAuthTab('login')">
                        <i class="fas fa-sign-in-alt"></i> Sign In
                    </button>
                    <button class="tab-button" onclick="switchAuthTab('register')">
                        <i class="fas fa-user-plus"></i> Create Account
                    </button>
                </div>

                <!-- Login Form -->
                <div id="loginForm" class="auth-form">
                    <div class="form-group">
                        <label><i class="fas fa-user"></i> Username</label>
                        <input type="text" id="loginUsername" placeholder="Enter your username" class="form-input">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-lock"></i> Password</label>
                        <input type="password" id="loginPassword" placeholder="Enter your password" class="form-input">
                    </div>
                    <button class="btn btn-primary" onclick="login()">
                        <i class="fas fa-coffee"></i> Start Your Coffee Journey
                    </button>
                </div>

                <!-- Register Form -->
                <div id="registerForm" class="auth-form hidden">
                    <div class="form-group">
                        <label><i class="fas fa-user"></i> Username</label>
                        <input type="text" id="regUsername" placeholder="Choose your username" class="form-input">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-lock"></i> Password</label>
                        <input type="password" id="regPassword" placeholder="Create strong password (min 6 chars)" class="form-input">
                    </div>
                    <div class="form-group">
                        <label><i class="fas fa-phone"></i> Phone Number</label>
                        <input type="tel" id="regPhone" placeholder="Your contact number" class="form-input">
                    </div>
                    <!-- REMOVED: Role selection dropdown -->
                    <button class="btn btn-success" onclick="register()">
                        <i class="fas fa-heart"></i> Join Highlands Family
                    </button>
                </div>

                <div id="authAlert" class="auth-alert"></div>
            </div>
        </div>

        <!-- Main Application -->
        <div id="mainApp" class="main-app hidden">
            <!-- User Dashboard Header -->
            <div class="user-dashboard">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user-circle"></i>
                    </div>
                    <div class="user-details">
                        <h3 id="userWelcome">Welcome back!</h3>
                        <span id="userRole" class="role-badge"></span>
                    </div>
                </div>
                <button class="btn btn-danger logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i> Sign Out
                </button>
            </div>

            <!-- Navigation Bar -->
            <div class="navigation-bar">
                <div class="nav-buttons">
                    <button class="filter-btn active" data-type="ALL" onclick="filterProducts('ALL')">
                        <i class="fas fa-th-large"></i> All Items
                    </button>
                    <button class="filter-btn" data-type="DRINK" onclick="filterProducts('DRINK')">
                        <i class="fas fa-coffee"></i> Beverages
                    </button>
                    <button class="filter-btn" data-type="FOOD" onclick="filterProducts('FOOD')">
                        <i class="fas fa-utensils"></i> Food & Snacks
                    </button>
                </div>
            </div>

            <!-- Main Content Grid -->
            <div class="content-grid">
                <!-- Products Section -->
                <div class="content-section products-section">
                    <div class="section-header">
                        <h3><i class="fas fa-coffee"></i> Our Premium Menu</h3>
                        <div id="adminProductControls" class="admin-controls hidden">
                            <button class="btn btn-add-product" onclick="openProductModal()">
                                <i class="fas fa-plus"></i> Add New Item
                            </button>
                        </div>
                    </div>
                    <div id="productsGrid" class="products-grid"></div>
                </div>

                <!-- Cart Section (Customer only) -->
                <div id="cartSection" class="content-section cart-section">
                    <div class="section-header">
                        <h3><i class="fas fa-shopping-cart"></i> Your Order</h3>
                    </div>
                    <div class="cart-container">
                        <div id="cartItems" class="cart-items"></div>
                        <div id="cartTotal" class="cart-total"></div>
                        <button id="checkoutBtn" class="btn btn-checkout hidden" onclick="openCheckoutModal()">
                            <i class="fas fa-credit-card"></i> Proceed to Checkout
                        </button>
                    </div>
                </div>

                <!-- Orders Section -->
                <div class="content-section orders-section">
                    <div class="section-header">
                        <h3><i class="fas fa-receipt"></i> Order History</h3>
                    </div>
                    <div id="ordersContainer" class="orders-container"></div>
                </div>
            </div>
        </div>

        <div id="alertContainer" class="alert-container"></div>
    </div>

    <!-- Product Modal -->
    <div id="productModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-coffee"></i> Manage Product</h3>
                <span class="modal-close" onclick="closeProductModal()">
                    <i class="fas fa-times"></i>
                </span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label><i class="fas fa-tag"></i> Product Name</label>
                    <input type="text" id="productName" placeholder="Enter product name" class="form-input">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-align-left"></i> Description</label>
                    <textarea id="productDescription" placeholder="Describe your product" class="form-textarea"></textarea>
                </div>
                <div class="form-group">
                    <label><i class="fas fa-dollar-sign"></i> Price (VND)</label>
                    <input type="number" id="productPrice" placeholder="Enter price" class="form-input">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-image"></i> Image URL</label>
                    <input type="url" id="productImageUrl" placeholder="Enter image URL (optional)" class="form-input">
                </div>
                <div class="form-group">
                    <label><i class="fas fa-list"></i> Category</label>
                    <select id="productType" onchange="toggleProductTypeFields()" class="form-select">
                        <option value="DRINK"><i class="fas fa-coffee"></i> Beverages</option>
                        <option value="FOOD"><i class="fas fa-utensils"></i> Food & Snacks</option>
                    </select>
                </div>
                
                <div id="drinkFields" class="product-specific-fields">
                    <div class="form-group">
                        <label><i class="fas fa-expand-arrows-alt"></i> Size</label>
                        <select id="productSize" class="form-select">
                            <option value="S">Small</option>
                            <option value="M">Medium</option>
                            <option value="L">Large</option>
                        </select>
                    </div>
                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="productIsHot" class="form-checkbox">
                            <span class="checkmark"></span>
                            <i class="fas fa-fire"></i> Hot Beverage
                        </label>
                    </div>
                </div>

                <div id="foodFields" class="product-specific-fields hidden">
                    <div class="form-group checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="productIsVegetarian" class="form-checkbox">
                            <span class="checkmark"></span>
                            <i class="fas fa-leaf"></i> Vegetarian Friendly
                        </label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" onclick="saveProduct()">
                    <i class="fas fa-save"></i> Save Product
                </button>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-shopping-bag"></i> Complete Your Order</h3>
                <span class="modal-close" onclick="closeCheckoutModal()">
                    <i class="fas fa-times"></i>
                </span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label><i class="fas fa-truck"></i> Order Type</label>
                    <select id="orderType" onchange="toggleOrderFields()" class="form-select">
                        <option value="REGULAR_ORDER">Regular Order (30-45 mins) - 25,000 VND</option>
                        <option value="EXPRESS_ORDER">Express Order (15-20 mins) - 50,000 VND</option>
                    </select>
                </div>
                
                <div id="regularOrderFields" class="order-fields">
                    <div class="form-group">
                        <label><i class="fas fa-map-marker-alt"></i> Delivery Address</label>
                        <textarea id="deliveryAddress" placeholder="Enter your complete delivery address" class="form-textarea"></textarea>
                    </div>
                </div>

                <div id="expressOrderFields" class="order-fields hidden">
                    <div class="form-group">
                        <label><i class="fas fa-store"></i> Pickup Location</label>
                        <input type="text" id="pickupLocation" placeholder="Choose pickup location" class="form-input">
                    </div>
                </div>
                
                <!-- Cart Items with Size Selection -->
                <div class="checkout-cart-items">
                    <h4><i class="fas fa-shopping-cart"></i> Your Order Items</h4>
                    <div id="checkoutCartItems"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary btn-large" onclick="placeOrder()">
                    <i class="fas fa-check-circle"></i> Confirm Order
                </button>
            </div>
        </div>
    </div>

    <!-- Load main application as ES module -->
    <script type="module" src="js/app.js"></script>
</body>
</html>